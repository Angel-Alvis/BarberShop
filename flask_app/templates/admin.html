<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Administrador | BarberShop</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- ESTILOS DEL PANEL USUARIO -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/usuario.css') }}" />

    <!-- Opcional -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/logout.css') }}" />
</head>

<body>

<main class="contenido">

    <!-- HEADER GLASS -->
    <header class="glass-header d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold mb-0">¡Bienvenido, {{nombre}}!</h2>
            <p class="mb-0">Aquí podrás gestionar toda la barbería desde un solo lugar.</p>
        </div>

        <a href="{{ url_for('logout') }}" class="btn btn-danger">
            <i class="bi bi-box-arrow-right me-1"></i>Salir
        </a>
    </header>

    <!-- TARJETAS ESTADÍSTICAS -->
    <div class="row g-4 mb-4">

        <div class="col-md-3">
            <div class="glass-card p-4 text-center">
                <h6 class="text-yellow-50">Usuarios registrados</h6>
                <h1>{{ total_usuarios }}</h1>
            </div>
        </div>

        <div class="col-md-3">
            <div class="glass-card p-4 text-center">
                <h6 class="text-yellow-50">Peluqueros activos</h6>
                <h1>{{ peluqueros_activos }}</h1>
            </div>
        </div>

        <div class="col-md-3">
            <div class="glass-card p-4 text-center">
                <h6 class="text-yellow-50">Pedidos pendientes</h6>
                <h1>{{ pedidos_pendientes }}</h1>
            </div>
        </div>

    </div>

    <!-- ACCESOS RÁPIDOS -->
    <section class="mt-4 mb-5">

        <h4 class="fw-bold mb-3" style="color:#3dfb04; text-shadow:0 0 5px rgba(61,251,4,.7);">
            <i class="bi bi-rocket-takeoff-fill me-2"></i>Accesos Rápidos
        </h4>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4">

            <div class="col">
                <a href="/admin/usuarios" class="quick-btn glass-card text-decoration-none">
                    <i class="bi bi-people quick-icon mb-2"></i>
                    <h6 class="fw-bold">Usuarios</h6>
                </a>
            </div>

            <div class="col">
                <a href="/admin/peluqueros" class="quick-btn glass-card text-decoration-none">
                    <i class="bi bi-scissors quick-icon mb-2"></i>
                    <h6 class="fw-bold">Peluqueros</h6>
                </a>
            </div>

            <div class="col">
                <a href="/admin/horarios" class="quick-btn glass-card text-decoration-none">
                    <i class="bi bi-clipboard2 quick-icon mb-2"></i>
                    <h6 class="fw-bold">Horarios</h6>
                </a>
            </div>

            <div class="col">
                <a href="/admin/productos" class="quick-btn glass-card text-decoration-none">
                    <i class="bi bi-box-seam quick-icon mb-2"></i>
                    <h6 class="fw-bold">Productos</h6>
                </a>
            </div>

            <div class="col">
                <a href="/admin/pedidos" class="quick-btn glass-card text-decoration-none">
                    <i class="bi bi-cart-check quick-icon mb-2"></i>
                    <h6 class="fw-bold">Pedidos</h6>
                </a>
            </div>

        </div>

    </section>

    <!-- TABLA ÚLTIMAS CITAS -->
    <div class="glass-panel mb-5">

        <h4 class="mb-3">Últimas citas registradas</h4>

        <div class="table-responsive">
            <table class="table table-dark table-hover table-striped text-center align-middle">

                <thead>
                    <tr>
                        <th>#</th>
                        <th>Cliente</th>
                        <th>Peluquero</th>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Estado</th>
                    </tr>
                </thead>

                <tbody>
                    {% for c in ultimas_citas %}
                    <tr>
                        <td>{{ c.id }}</td>
                        <td>{{ c.usuario_nombre }}</td>
                        <td>{{ c.peluquero_nombre }}</td>
                        <td>{{ c.fecha }}</td>
                        <td>{{ c.hora }}</td>
                        <td>
                            <span class="badge bg-info rounded-pill text-uppercase">
                                {{ c.estado }}
                            </span>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-white-50 py-3">No hay citas recientes.</td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

    </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
